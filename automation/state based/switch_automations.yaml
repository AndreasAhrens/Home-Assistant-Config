  # livingroom_switch_left_status:
  #   name: Living room switch left status
  #   initial: 'off'
  #   options:
  #     - 'off'
  #     - 'single'
  #     - 'double'
  #     - 'long'

  # livingroom_switch_left_number:
  #   name: Living room switch left status
  #   initial: 0
  #   min: 0
  #   max: 110
  #   step: 1

  ## These automations are used to set the status of an aqara button to either off, single, double or long. 
  ## The Aqara buttons does not support this out of the box, so this is a way to emulate it with automations and input selects.
  ## A bit of a hack, but should work. Have to be repeated for left button, right button and both buttons in order to get it all to work.
  ## Then the input select can be used for automations rather than using the on/off directly. Since the Aqara buttons only show up
  ## as a binary sensor, it can only have two values, on or off.




  ##################################
  ####### Livingroom buttons #######
  ##################################


  ##### Livingroom left button #####
  # Set an input select when button is clicked.
  - id: 6A2F6211-677D-410E-A657-C7C6D1812089
    alias: Livingroom switch left button single click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id:  
          click_type: single
    condition:
      - condition: state
        entity_id: input_select.livingroom_switch_left_status
        state: 'off'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_left_status
          option: 'single'

  # Now to detect double clicks. We detect a single click and check if the input select is already single. if so, it's a double.
  - id: 9C9A8702-9167-4EC4-A760-609271470F6D
    alias: Livingroom switch left button double click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_left_158d000171d630
          click_type: single
    condition: 
      - condition: state
        entity_id: input_select.livingroom_switch_left_status
        state: 'single'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_left_status
          option: 'double'

  # If the input select doesn't change state for 2 seconds, change back to off. 
  - id: F88BC003-BA85-4108-8FF6-47EE35C01F01
    alias: Livingroom switch left button set to off
    trigger:
      - platform: state
        entity_id: input_select.livingroom_switch_left_status
        to: 'single'
        for:
          seconds: 2
      - platform: state
        entity_id: input_select.livingroom_switch_left_status
        to: 'double'
        for:
          seconds: 2
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_left_status
          option: 'off'

  # If the input select is double, turn off the ceiling group if on, turn on if off. Also set status to off.
  - id: 44DEE307-E55E-42F1-9CFA-6D79C8C2A920
    alias: Livingroom switch left button double click ceiling is on
    trigger:
      - platform: state
        entity_id: input_select.livingroom_switch_left_status
        to: 'double'
    condition:
      - condition: state
        entity_id: light.living_room_roof_1
        state: 'on'
    action:
      - service: homeassistant.turn_off
        entity_id: 
          - group.livingroom_ceiling
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_left_status
          option: 'off'

  - id: 1E30F10C-8881-433B-8814-8E28E5EF0BDF
    alias: Livingroom switch left button double click ceiling is off
    trigger:
      - platform: state
        entity_id: input_select.livingroom_switch_left_status
        to: 'double'
    condition:
      - condition: state
        entity_id: light.living_room_roof_1
        state: 'off'
    action:
      - service: homeassistant.turn_on
        entity_id: 
          - group.livingroom_ceiling
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_left_status
          option: 'off'

  # I want to increase the light if single press is done. Max is 100. Starting at 5 and going up 17 per time, we get these numbers:
  # 5, 22, 39, 56, 73, 90, 107
  # 5 is pretty perfect for low light like watching tv, and 90 is too bright already.
  # 110 is the maximum number for the input_number so I needed something that maxed out over 100 but below 110.
  # Also sets the status to off so it can be used again without waiting for the reset timer
  - id: E287CC07-EDF4-4963-A94C-108811E46CCB
    alias: Livingroom switch left button single press increase number
    trigger:
      - platform: state
        entity_id: input_select.livingroom_switch_left_status
        to: 'single'
        for:
          seconds: 1.2
    action:
      - service: input_number.set_value
        data_template: 
          entity_id: input_number.livingroom_switch_left_number
          value: '{{ states.input_number.livingroom_switch_left_number.state | int + 17 }}'
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_left_status
          option: 'off'
      
  # If we go over 100, reduce to 5 to restart the flow. 
  - id: 7104B3FE-EFA5-455D-A1CE-7822C1A8A1ED
    alias: Set livingroom switch state to 5 if over 100
    trigger:
      - platform: numeric_state
        entity_id: input_number.livingroom_switch_left_number
        # value_template: '{{ states.input_number.livingroom_switch_left_number.state  }}'
        above: 100
    action:
      - service: input_number.set_value
        data_template: 
          entity_id: input_number.livingroom_switch_left_number
          value: '5'

  # When we change the input_number, set the ceiling group to that brightness as a percentage
  - id: 531E17EB-19EE-43FC-860F-CFB0195A5C6A
    alias: Set livingroom ceiling based on input_number
    trigger:
      - platform: state
        entity_id: input_number.livingroom_switch_left_number
    action:
      - service: homeassistant.turn_on
        data_template:
          entity_id: group.livingroom_ceiling
          brightness_pct: '{{ states.input_number.livingroom_switch_left_number.state | int }}'



  # Never found a good way to make this work
  #- alias: Livingroom switch left button long click
  #  trigger:
  #    - platform: event
  #      event_type: click
  #      event_data:
  #        entity_id: binary_sensor.wall_switch_left_158d000171d630
  #        click_type: single
  #      for: 
  #        seconds: 1
  #  action:
  #    - service: input_select.select_option
  #      data:
  #        entity_id: input_select.livingroom_switch_left_status
  #        option: 'long'


##### Livingroom right button #####
  # Set an input select when button is clicked.
  - id: A74B9CB0-2397-4925-B0E3-BA4FB4C4640E
    alias: Livingroom switch right button single click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_right_158d000171d630
          click_type: single
    condition:
      - condition: state
        entity_id: input_select.livingroom_switch_right_status
        state: 'off'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_right_status
          option: 'single'

  # Now to detect double clicks. We detect a single click and check if the input select is already single. if so, it's a double.
  - id: 7E84178C-C831-4DBB-906F-D05A8BE9157C
    alias: Livingroom switch right button double click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_right_158d000171d630
          click_type: single
    condition: 
      - condition: state
        entity_id: input_select.livingroom_switch_right_status
        state: 'single'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_right_status
          option: 'double'

  # If the input select doesn't change state for 2 seconds, change back to off. 
  - id: 19B628D1-869A-47A2-AD3E-9F146A5D26B6
    alias: Livingroom switch right button set to off
    trigger:
      - platform: state
        entity_id: input_select.livingroom_switch_right_status
        to: 'single'
        for:
          seconds: 2
      - platform: state
        entity_id: input_select.livingroom_switch_right_status
        to: 'double'
        for:
          seconds: 2
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_right_status
          option: 'off'

  # If the input select is double, turn off the ceiling group if on, turn on if off. Also set status to off.
  - id: 65CA679D-5ED8-4691-91A4-851A555CB2DC
    alias: Livingroom switch right button double click ceiling is on
    trigger:
      - platform: state
        entity_id: input_select.livingroom_switch_right_status
        to: 'double'
    condition:
      - condition: state
        entity_id: light.living_room_wall
        state: 'on'
    action:
      - service: homeassistant.turn_off
        entity_id: 
          - light.living_room_wall
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_right_status
          option: 'off'

  - id: 65CA679D-5ED8-4691-91A4-851A555CB2DC
    alias: Livingroom switch right button double click ceiling is off
    trigger:
      - platform: state
        entity_id: input_select.livingroom_switch_right_status
        to: 'double'
    condition:
      - condition: state
        entity_id: light.living_room_wall
        state: 'off'
    action:
      - service: homeassistant.turn_on
        entity_id: 
          - light.living_room_wall
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_right_status
          option: 'off'

  # I want to increase the light if single press is done. Max is 100. Starting at 5 and going up 17 per time, we get these numbers:
  # 5, 22, 39, 56, 73, 90, 107
  # 5 is pretty perfect for low light like watching tv, and 90 is too bright already.
  # 110 is the maximum number for the input_number so I needed something that maxed out over 100 but below 110.
  # Also sets the status to off so it can be used again without waiting for the reset timer
  - id: DB1B6D71-773F-4380-A99F-BFED09ED5D42
    alias: Livingroom switch right button single press increase number
    trigger:
      - platform: state
        entity_id: input_select.livingroom_switch_right_status
        to: 'single'
        for:
          seconds: 1.2
    action:
      - service: input_number.set_value
        data_template: 
          entity_id: input_number.livingroom_switch_right_number
          value: '{{ states.input_number.livingroom_switch_right_number.state | int + 17 }}'
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_right_status
          option: 'off'
      
  # If we go over 100, reduce to 5 to restart the flow. 
  - id: 4E44CB4F-B7BF-4B9C-B093-263C0B98C483
    alias: Set livingroom switch state to 5 if over 100
    trigger:
      - platform: numeric_state
        entity_id: input_number.livingroom_switch_right_number
        # value_template: '{{ states.input_number.livingroom_switch_right_number.state  }}'
        above: 100
    action:
      - service: input_number.set_value
        data_template: 
          entity_id: input_number.livingroom_switch_right_number
          value: '5'

  # When we change the input_number, set the ceiling group to that brightness as a percentage
  - id: 32F64A12-BCD0-4A34-A360-E519523CD5E9
    alias: Set livingroom ceiling based on input_number
    trigger:
      - platform: state
        entity_id: input_number.livingroom_switch_right_number
    action:
      - service: homeassistant.turn_on
        data_template:
          entity_id: light.living_room_wall
          brightness_pct: '{{ states.input_number.livingroom_switch_right_number.state | int }}'




  ##### Livingroom both buttons #####
  # Set an input select when button is clicked.
  - id: C3E8C1A3-4D22-40B6-882B-3CBB7D93A417
    alias: Livingroom switch both buttons single click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_both_158d000171d630
          click_type: both
    condition:
      - condition: state
        entity_id: input_select.livingroom_switch_both_status
        state: 'off'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_both_status
          option: 'single'

  # Now to detect double clicks. We detect a single click and check if the input select is already single. if so, it's a double.
  - id: 42DD21AE-3600-4EBC-A008-9E4F9F101B6D
    alias: Livingroom switch both buttons double click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_both_158d000171d630
          click_type: both
    condition: 
      - condition: state
        entity_id: input_select.livingroom_switch_both_status
        state: 'single'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_both_status
          option: 'double'

  # If the input select doesn't change state for 2 seconds, change back to off. 
  - id: 5D5E3280-1018-4E57-BA07-E872D067425C
    alias: Livingroom switch both buttons set to off
    trigger:
      - platform: state
        entity_id: input_select.livingroom_switch_both_status
        to: 'single'
        for:
          seconds: 2
      - platform: state
        entity_id: input_select.livingroom_switch_both_status
        to: 'double'
        for:
          seconds: 2
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_both_status
          option: 'off'

  # If the input select is double, turn off the livingroom fan if on, turn on if off. Also set status to off.
  - id: 74248EB9-A2E3-420E-8987-A1A49AFA7B46
    alias: Livingroom switch both buttons double click fan is on
    trigger:
      - platform: state
        entity_id: input_select.livingroom_switch_both_status
        to: 'double'
    condition:
      - condition: state
        entity_id: switch.living_room_fan
        state: 'on'
    action:
      - service: homeassistant.turn_off
        entity_id: 
          - switch.living_room_fan
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_both_status
          option: 'off'

  - id: CCBDA265-0D04-4C4B-B809-A07CCACFE9F5
    alias: Livingroom switch both buttons double click fan is off
    trigger:
      - platform: state
        entity_id: input_select.livingroom_switch_both_status
        to: 'double'
    condition:
      - condition: state
        entity_id: switch.living_room_fan
        state: 'off'
    action:
      - service: homeassistant.turn_on
        entity_id: 
          - switch.living_room_fan
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_both_status
          option: 'off'


  # If the input select is single, turn off the livingroom tv bench if on, turn on if off. Also set status to off.
  - id: 5E9F4C9A-806B-43E8-9C3A-5418DB950A1D
    alias: Livingroom switch both buttons double click tv bench is on
    trigger:
      - platform: state
        entity_id: input_select.livingroom_switch_both_status
        to: 'single'
        for:
          seconds: 1.5
    condition:
      - condition: state
        entity_id: light.tv_bench
        state: 'on'
    action:
      - service: homeassistant.turn_off
        entity_id: 
          - light.tv_bench
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_both_status
          option: 'off'

  - id: 49B4CBE9-222B-4A4C-B7DC-4FE09E17A9FC
    alias: Livingroom switch both button double click tv bench is off
    trigger:
      - platform: state
        entity_id: input_select.livingroom_switch_both_status
        to: 'single'
        for:
          seconds: 1.5
    condition:
      - condition: state
        entity_id: light.tv_bench
        state: 'off'
    action:
      - service: homeassistant.turn_on
        entity_id: 
          - light.tv_bench
      - service: input_select.select_option
        data:
          entity_id: input_select.livingroom_switch_both_status
          option: 'off'

  

  ##################################
  ##################################
  ####### Diningroom buttons #######
  ##################################
  ##################################

  ##### Diningroom left button #####
  # Set an input select when button is clicked.
  - id: 44BC2D28-6ABC-4A1B-84CC-297A0F2EF4F6
    alias: Diningroom switch left button single click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_left_158d000163ba89
          click_type: single
    condition:
      - condition: state
        entity_id: input_select.diningroom_switch_left_status
        state: 'off'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.diningroom_switch_left_status
          option: 'single'

  # Now to detect double clicks. We detect a single click and check if the input select is already single. if so, it's a double.
  - id: B208FB14-94F2-42F9-BCD3-AC3262325151
    alias: Diningroom switch left button double click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_left_158d000163ba89
          click_type: single
    condition: 
      - condition: state
        entity_id: input_select.diningroom_switch_left_status
        state: 'single'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.diningroom_switch_left_status
          option: 'double'

  # If the input select doesn't change state for 2 seconds, change back to off. 
  - id: 01BF9737-5D56-48FE-8EF7-1943400E5DF5
    alias: Diningroom switch left button set to off
    trigger:
      - platform: state
        entity_id: input_select.diningroom_switch_left_status
        to: 'single'
        for:
          seconds: 2
      - platform: state
        entity_id: input_select.diningroom_switch_left_status
        to: 'double'
        for:
          seconds: 2
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.diningroom_switch_left_status
          option: 'off'

  # If the input select is sinlge, turn off the diningroom table light if on, turn on if off. Also set status to off.
  - id: DF42248B-A7C8-4F99-88F0-188FA08FB20F
    alias: Diningroom switch left button single click ceiling is on
    trigger:
      - platform: state
        entity_id: input_select.diningroom_switch_left_status
        to: 'single'
    condition:
      - condition: state
        entity_id: switch.dining_room_table
        state: 'on'
    action:
      - service: homeassistant.turn_off
        entity_id: 
          - switch.dining_room_table
      - service: input_select.select_option
        data:
          entity_id: input_select.diningroom_switch_left_status
          option: 'off'

  - id: E81EEB25-6F34-4B1B-BAB5-B4EA92F8DF16
    alias: Diningroom switch left button single click ceiling is off
    trigger:
      - platform: state
        entity_id: input_select.diningroom_switch_left_status
        to: 'single'
    condition:
      - condition: state
        entity_id: switch.dining_room_table
        state: 'off'
    action:
      - service: homeassistant.turn_on
        entity_id: 
          - switch.dining_room_table
      - service: input_select.select_option
        data:
          entity_id: input_select.diningroom_switch_left_status
          option: 'off'

  

##### Diningroom right button #####
  # Set an input select when button is clicked.
  - id: D247158F-AA6F-4D9D-B245-D8F1E250AF07
    alias: Diningroom switch right button single click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_right_158d000163ba89
          click_type: single
    condition:
      - condition: state
        entity_id: input_select.diningroom_switch_right_status
        state: 'off'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.diningroom_switch_right_status
          option: 'single'

  # Now to detect double clicks. We detect a single click and check if the input select is already single. if so, it's a double.
  - id: 1FE238BB-C9F5-4399-A466-62735B7F2CF5
    alias: Diningroom switch right button single click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_right_158d000163ba89
          click_type: single
    condition: 
      - condition: state
        entity_id: input_select.diningroom_switch_right_status
        state: 'single'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.diningroom_switch_right_status
          option: 'double'

  # If the input select doesn't change state for 2 seconds, change back to off. 
  - id: 85237DFB-940A-4D72-98F7-68E741A34D3F
    alias: Diningroom switch right button set to off
    trigger:
      - platform: state
        entity_id: input_select.diningroom_switch_right_status
        to: 'single'
        for:
          seconds: 2
      - platform: state
        entity_id: input_select.diningroom_switch_right_status
        to: 'double'
        for:
          seconds: 2
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.diningroom_switch_right_status
          option: 'off'

  # If the input select is single, turn off the ceiling group if on, turn on if off. Also set status to off.
  - id: F8ACF702-E076-449B-80FE-89CF2711A797
    alias: Diningroom switch right button double click ceiling is on
    trigger:
      - platform: state
        entity_id: input_select.diningroom_switch_right_status
        to: 'single'
    condition:
      - condition: state
        entity_id: switch.dining_room_cabinet
        state: 'on'
    action:
      - service: homeassistant.turn_off
        entity_id: 
          - switch.dining_room_cabinet
      - service: input_select.select_option
        data:
          entity_id: input_select.diningroom_switch_right_status
          option: 'off'

  - id: F3B8F6B8-2DB1-458C-8B16-5237C3217881
    alias: Diningroom switch right button single click ceiling is off
    trigger:
      - platform: state
        entity_id: input_select.diningroom_switch_right_status
        to: 'single'
    condition:
      - condition: state
        entity_id: switch.dining_room_cabinet
        state: 'off'
    action:
      - service: homeassistant.turn_on
        entity_id: 
          - switch.dining_room_cabinet
      - service: input_select.select_option
        data:
          entity_id: input_select.diningroom_switch_right_status
          option: 'off'



  ##### Diningroom both buttons #####
  # Set an input select when button is clicked.
  - id: AD8DF3F9-A3F3-472A-AF10-99BCA699F78F
    alias: Diningroom switch both buttons single click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_both_158d000163ba89
          click_type: both
    condition:
      - condition: state
        entity_id: input_select.diningroom_switch_both_status
        state: 'off'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.diningroom_switch_both_status
          option: 'single'

  # Now to detect double clicks. We detect a single click and check if the input select is already single. if so, it's a double.
  - id: 4FF730C0-92A6-4143-9CDC-EA5F50002E54
    alias: Diningroom switch both buttons double click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_both_158d000163ba89
          click_type: both
    condition: 
      - condition: state
        entity_id: input_select.diningroom_switch_both_status
        state: 'single'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.diningroom_switch_both_status
          option: 'double'

  # If the input select doesn't change state for 2 seconds, change back to off. 
  - id: CE117ED3-DDCC-4DC0-9C5D-ADDF6DF7E88F
    alias: Diningroom switch both buttons set to off
    trigger:
      - platform: state
        entity_id: input_select.diningroom_switch_both_status
        to: 'single'
        for:
          seconds: 2
      - platform: state
        entity_id: input_select.diningroom_switch_both_status
        to: 'double'
        for:
          seconds: 2
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.diningroom_switch_both_status
          option: 'off'

  # If the input select is single, turn off the Diningroom tv bench if on, turn on if off. Also set status to off.
  - id: 92A53DAB-6593-41D7-8CE7-14C1DC78C45E
    alias: Diningroom switch both buttons double click tv bench is on
    trigger:
      - platform: state
        entity_id: input_select.diningroom_switch_both_status
        to: 'single'
    condition:
      - condition: state
        entity_id: switch.dining_room_aquarium
        state: 'on'
    action:
      - service: homeassistant.turn_off
        entity_id: 
          - switch.dining_room_aquarium
      - service: input_select.select_option
        data:
          entity_id: input_select.diningroom_switch_both_status
          option: 'off'

  - id: 212E72F2-7C89-4A3E-A359-722D68F22263
    alias: Diningroom switch both button double click tv bench is off
    trigger:
      - platform: state
        entity_id: input_select.diningroom_switch_both_status
        to: 'single'
    condition:
      - condition: state
        entity_id: switch.dining_room_aquarium
        state: 'off'
    action:
      - service: homeassistant.turn_on
        entity_id: 
          - switch.dining_room_aquarium
      - service: input_select.select_option
        data:
          entity_id: input_select.diningroom_switch_both_status
          option: 'off'

  ##################################
  ####### Bedroom buttons #######
  ##################################


  ##### Bedroom left button #####
  # Set an input select when button is clicked.
  - id: 162E4E3D-2D20-4DAF-A272-1AAF321BDA77
    alias: Bedroom switch left button single click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_left_158d000163dc70
          click_type: single
    condition:
      - condition: state
        entity_id: input_select.bedroom_switch_left_status
        state: 'off'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_left_status
          option: 'single'

  # Now to detect double clicks. We detect a single click and check if the input select is already single. if so, it's a double.
  - id: 6EA639FD-BBCC-4375-9F45-2ABCFAD9DFEC
    alias: Bedroom switch left button double click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_left_158d000163dc70
          click_type: single
    condition: 
      - condition: state
        entity_id: input_select.bedroom_switch_left_status
        state: 'single'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_left_status
          option: 'double'

  # If the input select doesn't change state for 2 seconds, change back to off. 
  - id: 5E52B55B-510C-465E-8075-1DC0FC886F60
    alias: Bedroom switch left button set to off
    trigger:
      - platform: state
        entity_id: input_select.bedroom_switch_left_status
        to: 'single'
        for:
          seconds: 2
      - platform: state
        entity_id: input_select.bedroom_switch_left_status
        to: 'double'
        for:
          seconds: 2
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_left_status
          option: 'off'

  # If the input select is double, turn off the her bedside  if on, turn on if off. Also set status to off.
  - id: F47EE4D3-4134-4953-83AB-499194FF977F
    alias: Bedroom switch left button double click her bedside is on
    trigger:
      - platform: state
        entity_id: input_select.bedroom_switch_left_status
        to: 'double'
    condition:
      - condition: state
        entity_id: light.her_bedside
        state: 'on'
    action:
      - service: homeassistant.turn_off
        entity_id: 
          - light.her_bedside
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_left_status
          option: 'off'

  - id: 6A8D7AE9-0B76-420F-A518-8C850DD8BF9D
    alias: Bedroom switch left button double click her bedside is off
    trigger:
      - platform: state
        entity_id: input_select.bedroom_switch_left_status
        to: 'double'
    condition:
      - condition: state
        entity_id: light.her_bedside
        state: 'off'
    action:
      - service: homeassistant.turn_on
        entity_id: 
          - light.her_bedside
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_left_status
          option: 'off'

  # I want to increase the light if single press is done. Max is 100. Starting at 5 and going up 17 per time, we get these numbers:
  # 5, 22, 39, 56, 73, 90, 107
  # 5 is pretty perfect for low light like watching tv, and 90 is too bright already.
  # 110 is the maximum number for the input_number so I needed something that maxed out over 100 but below 110.
  # Also sets the status to off so it can be used again without waiting for the reset timer
  - id: 2FBE77FE-D21F-4676-9B37-33548008AB0F
    alias: Bedroom switch left button single press increase number
    trigger:
      - platform: state
        entity_id: input_select.bedroom_switch_left_status
        to: 'single'
        for:
          seconds: 1.2
    action:
      - service: input_number.set_value
        data_template: 
          entity_id: input_number.bedroom_switch_left_number
          value: '{{ states.input_number.bedroom_switch_left_number.state | int + 17 }}'
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_left_status
          option: 'off'
      
  # If we go over 100, reduce to 5 to restart the flow. 
  - id: 9E0663A7-E599-4C97-A63E-10B1FA6BA469
    alias: Set Bedroom switch left state to 5 if over 100
    trigger:
      - platform: numeric_state
        entity_id: input_number.bedroom_switch_left_number
        # value_template: '{{ states.input_number.bedroom_switch_left_number.state  }}'
        above: 100
    action:
      - service: input_number.set_value
        data_template: 
          entity_id: input_number.bedroom_switch_left_number
          value: '5'

  # When we change the input_number, set the ceiling group to that brightness as a percentage
  - id: 9B4CB66E-4E84-4BB7-A818-0D47CBC8FE61
    alias: Set Bedroom her bedside based on input_number
    trigger:
      - platform: state
        entity_id: input_number.bedroom_switch_left_number
    action:
      - service: homeassistant.turn_on
        data_template:
          entity_id: light.her_bedside
          brightness_pct: '{{ states.input_number.bedroom_switch_left_number.state | int }}'


##### Bedroom right button #####
  # Set an input select when button is clicked.
  - id: 60CE557D-6D4C-4569-8F9D-86A86E912FB0
    alias: Bedroom switch right button single click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_right_158d000163dc70
          click_type: single
    condition:
      - condition: state
        entity_id: input_select.bedroom_switch_right_status
        state: 'off'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_right_status
          option: 'single'

  # Now to detect double clicks. We detect a single click and check if the input select is already single. if so, it's a double.
  - id: 52F09526-74FC-4BAB-82A6-4A7D9DF909D4
    alias: Bedroom switch right button double click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_right_158d000163dc70
          click_type: single
    condition: 
      - condition: state
        entity_id: input_select.bedroom_switch_right_status
        state: 'single'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_right_status
          option: 'double'

  # If the input select doesn't change state for 2 seconds, change back to off. 
  - id: 31E9FD4F-12F3-4EF2-90A6-E2ACE158C9F7
    alias: Bedroom switch right button set to off
    trigger:
      - platform: state
        entity_id: input_select.bedroom_switch_right_status
        to: 'single'
        for:
          seconds: 2
      - platform: state
        entity_id: input_select.bedroom_switch_right_status
        to: 'double'
        for:
          seconds: 2
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_right_status
          option: 'off'

  # If the input select is double, turn off the his bedside light  if on, turn on if off. Also set status to off.
  - id: 862EA9DD-C571-4ADD-A2CA-E170FBBA656E
    alias: Bedroom switch right button double click ceiling is on
    trigger:
      - platform: state
        entity_id: input_select.bedroom_switch_right_status
        to: 'double'
    condition:
      - condition: state
        entity_id: light.his_bedside
        state: 'on'
    action:
      - service: homeassistant.turn_off
        entity_id: 
          - light.his_bedside
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_right_status
          option: 'off'

  - id: 432FFCA4-7816-41B5-B42A-2DE916F7A0AD
    alias: Bedroom switch right button double click ceiling is off
    trigger:
      - platform: state
        entity_id: input_select.bedroom_switch_right_status
        to: 'double'
    condition:
      - condition: state
        entity_id: light.his_bedside
        state: 'off'
    action:
      - service: homeassistant.turn_on
        entity_id: 
          - light.his_bedside
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_right_status
          option: 'off'

  # I want to increase the light if single press is done. Max is 100. Starting at 5 and going up 17 per time, we get these numbers:
  # 5, 22, 39, 56, 73, 90, 107
  # 5 is pretty perfect for low light like watching tv, and 90 is too bright already.
  # 110 is the maximum number for the input_number so I needed something that maxed out over 100 but below 110.
  # Also sets the status to off so it can be used again without waiting for the reset timer
  - id: CA0C6257-5008-4DD2-A6C3-A21CE622F0F2
    alias: Bedroom switch right button single press increase number
    trigger:
      - platform: state
        entity_id: input_select.bedroom_switch_right_status
        to: 'single'
        for:
          seconds: 1.2
    action:
      - service: input_number.set_value
        data_template: 
          entity_id: input_number.bedroom_switch_right_number
          value: '{{ states.input_number.bedroom_switch_right_number.state | int + 17 }}'
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_right_status
          option: 'off'
      
  # If we go over 100, reduce to 5 to restart the flow. 
  - id: 8DC700B0-7C20-4236-B1C8-86518D15A509
    alias: Set Bedroom switch right state to 5 if over 100
    trigger:
      - platform: numeric_state
        entity_id: input_number.bedroom_switch_right_number
        # value_template: '{{ states.input_number.bedroom_switch_right_number.state  }}'
        above: 100
    action:
      - service: input_number.set_value
        data_template: 
          entity_id: input_number.bedroom_switch_right_number
          value: '5'

  # When we change the input_number, set the his bedside light to that brightness as a percentage
  - id: B366719B-96D9-4C89-B114-9CF487146358
    alias: Set Bedroom ceiling based on input_number
    trigger:
      - platform: state
        entity_id: input_number.Bedroom_switch_right_number
    action:
      - service: homeassistant.turn_on
        data_template:
          entity_id: light.his_bedside
          brightness_pct: '{{ states.input_number.bedroom_switch_right_number.state | int }}'




  ##### Bedroom both buttons #####
  # Set an input select when button is clicked.
  - id: 4C5DD6A7-BA91-46D6-B4CF-B53E4D1C09FF
    alias: Bedroom switch both buttons single click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_both_158d000163dc70
          click_type: both
    condition:
      - condition: state
        entity_id: input_select.bedroom_switch_both_status
        state: 'off'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_both_status
          option: 'single'

  # Now to detect double clicks. We detect a single click and check if the input select is already single. if so, it's a double.
  - id: B106752C-57D4-416D-BF4E-1BB838058350
    alias: Bedroom switch both buttons double click
    trigger:
      - platform: event
        event_type: click
        event_data:
          entity_id: binary_sensor.wall_switch_both_158d000163dc70
          click_type: both
    condition: 
      - condition: state
        entity_id: input_select.bedroom_switch_both_status
        state: 'single'
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.Bedroom_switch_both_status
          option: 'double'

  # If the input select doesn't change state for 2 seconds, change back to off. 
  - id: 4531497B-DCF6-4B75-B921-393ECCE10665
    alias: Bedroom switch both buttons set to off
    trigger:
      - platform: state
        entity_id: input_select.bedroom_switch_both_status
        to: 'single'
        for:
          seconds: 2
      - platform: state
        entity_id: input_select.bedroom_switch_both_status
        to: 'double'
        for:
          seconds: 2
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_both_status
          option: 'off'

  # If the input select is double, turn off the Bedroom fan if on, turn on if off. Also set status to off.
  - id: BDDC63F5-A68F-49FA-9427-0D563AB6151C
    alias: Bedroom switch both buttons double click fan is on
    trigger:
      - platform: state
        entity_id: input_select.bedroom_switch_both_status
        to: 'double'
    condition:
      - condition: state
        entity_id: switch.bedroom_fan
        state: 'on'
    action:
      - service: homeassistant.turn_off
        entity_id: 
          - switch.bedroom_fan
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_both_status
          option: 'off'

  - id: 79FF681C-3FEE-4463-924F-E3AC1E595ED8
    alias: Bedroom switch both buttons double click fan is off
    trigger:
      - platform: state
        entity_id: input_select.bedroom_switch_both_status
        to: 'double'
    condition:
      - condition: state
        entity_id: switch.bedroom_fan
        state: 'off'
    action:
      - service: homeassistant.turn_on
        entity_id: 
          - switch.bedroom_fan
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_both_status
          option: 'off'


  # If the input select is single, open cover if closed, turn close if open. Also set status to off.
  - id: 51587587-53B4-46C0-836B-8CF5044C0F87
    alias: Bedroom switch both buttons double click rollers are open
    trigger:
      - platform: state
        entity_id: input_select.bedroom_switch_both_status
        to: 'single'
        for:
          seconds: 1.5
    condition:
      - condition: state
        entity_id: cover.bedroom_rollers
        state: 'open'
    action:
      - service: cover.close_cover
        entity_id: 
          - cover.bedroom_rollers
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_both_status
          option: 'off'

  - id: 3543F710-44B2-476A-9063-15C17550A73F
    alias: Bedroom switch both button double click rollers are closed
    trigger:
      - platform: state
        entity_id: input_select.bedroom_switch_both_status
        to: 'single'
        for:
          seconds: 1.5
    condition:
      - condition: state
        entity_id: cover.bedroom_rollers
        state: 'closed'
    action:
      - service: cover.open_cover
        entity_id: 
          - cover.bedroom_rollers
      - service: input_select.select_option
        data:
          entity_id: input_select.bedroom_switch_both_status
          option: 'off'
