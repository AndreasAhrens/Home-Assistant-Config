  - alias: 'Andreas Not Home'
    trigger:
      - platform: zone
        event: leave
        zone: zone.home
        entity_id: device_tracker.allyourbasearebelongtous2
      - platform: zone
        event: leave
        zone: zone.devv
        entity_id: device_tracker.allyourbasearebelongtous2
      - platform: zone
        event: leave
        zone: zone.hyllinge
        entity_id: device_tracker.allyourbasearebelongtous2
      - platform: zone
        event: leave
        zone: zone.lidl
        entity_id: device_tracker.allyourbasearebelongtous2
      - platform: zone
        event: leave
        zone: zone.vala
        entity_id: device_tracker.allyourbasearebelongtous2
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.andreas_location
          option: Not Home

  - alias: 'Andreas Leave Work notification'
    trigger:
      - platform: zone
        event: leave
        zone: zone.devv
        entity_id: device_tracker.allyourbasearebelongtous2
      - platform: zone
        event: leave
        zone: zone.devv
        entity_id: device_tracker.all_your_base_are_belong_to_us_2
    condition:
      - condition: time
        after: '16:00'
    action:
      - service: script.speak_message
        data:
          message: 'Andreas has left work and is on his way home, estimated time to arrival is {{ states.sensor.andreas_to_home.attributes.duration }}'
      

  - alias: 'Andreas Close to home notification'
    trigger:
      - platform: zone
        event: enter
        zone: zone.close_to_home
        entity_id: device_tracker.allyourbasearebelongtous2
    action:
      - service: homeassistant.turn_on
        entity_id:
          - switch.garden_driveway
      - service: script.speak_message
        data:
          message: 'Andreas is almost home, estimated time to arrival is {{ states.sensor.andreas_to_home.attributes.duration }}'

  - alias: 'Andreas Home notification'
    trigger:
      - platform: zone
        event: enter
        zone: zone.home
        entity_id: device_tracker.allyourbasearebelongtous2
      - platform: zone
        event: enter
        zone: zone.home
        entity_id: device_tracker.all_your_base_are_belong_to_us_2
      - platform: zone
        event: enter
        zone: zone.home
        entity_id: device_tracker.allyourongtous2
    action:
      - service: input_select.select_option
        data:
          entity_id: input_select.andreas_location
          option: Home
      - service: script.speak_message
        data:
          message: 'Andreas is home'
      - delay: '00:05:00'
      - service: homeassistant.turn_off
        entity_id:
          - switch.garden_driveway

  #- alias: 'Andreas Lidl position'
  #  trigger:
  #    - platform: zone
  #      event: enter
  #      zone: zone.lidl
  #      entity_id: device_tracker.allyourbasearebelongtous2
  #    - platform: zone
  #      event: enter
  #      zone: zone.lidl
  #      entity_id: device_tracker.all_your_base_are_belong_to_us_2
  #  action:
  #    - service: input_select.select_option
  #      data:
  #        entity_id: input_select.andreas_location
  #        option: Lidl

  #- alias: 'Andreas Lidl input select'
  #  trigger:
  #    - platform: state
  #      entity_id: input_select.andreas_location
  #      state: Lidl
  #  action:
  #    - service: tts.google_say
  #      data_template:
  #        entity_id: media_player.mpd
  #        message: 'Andreas at Lidl, should he buy something?'
  #    - service: homeassistant.turn_on
  #      entity_id: switch.kitchen_speaker
  #    - delay: '00:00:05'
  #    - service: media_player.volume_set
  #      data:
  #        entity_id: media_player.kitchen_audio
  #        volume_level: 0.75
  #    - service: tts.google_say
  #      data_template:
  #        entity_id: media_player.kitchen_audio
  #        message: 'Andreas at Lidl, should he buy something?'
  #    - delay: '00:00:05'
  #    - service: media_player.volume_set
  #      data:
  #        entity_id: media_player.kitchen_audio
  #        volume_level: 0.25
  #    - service: homeassistant.turn_off
  #      entity_id: switch.kitchen_speaker
  #    - delay: '00:05:00'


  - alias: 'Andreas Home MQTT'
    trigger:
      - platform: zone
        event: enter
        zone: zone.home
        entity_id: device_tracker.allyourbasearebelongtous2
      - platform: zone
        event: enter
        zone: zone.home
        entity_id: device_tracker.all_your_base_are_belong_to_us_2
    condition:
      - condition: state
        entity_id: switch.andreas_home
        state: 'off'
    action:
      - service: switch.turn_on
        entity_id: switch.andreas_home

  - alias: 'Amanda leaving school'
    trigger:
      - platform: zone
        event: leave
        zone: zone.Internationella_Engelska_Skolan
        entity_id: device_tracker.amandasiphone
    action:
      - service: script.speak_message
        data:
          message: 'Amanda is leaving school'
      - service: notify.ios_all_your_base_are_belong_to_us_2
        data:
          message: "Amanda is leaving school"

  - alias: 'Amanda arriving at school'
    trigger:
      - platform: zone
        event: enter
        zone: zone.Internationella_Engelska_Skolan
        entity_id: device_tracker.amandasiphone
    action:
      - service: script.speak_message
        data:
          message: 'Amanda has arrived at school'
      - service: notify.ios_all_your_base_are_belong_to_us_2
        data:
          message: "Amanda has arrived to school"